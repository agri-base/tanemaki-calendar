const getPrefectureFromPostal = (postal) => {
const code = postal.slice(0, 2);
const mapping = {
    "01": "åŒ—æµ·é“", "02": "é’æ£®", "13": "æ±äº¬", "14": "ç¥å¥ˆå·", "35": "å±±å£", "47": "æ²–ç¸„"
    "01": "åŒ—æµ·é“", "02": "é’æ£®", "03": "å²©æ‰‹", "04": "å®®åŸ", "05": "ç§‹ç”°",
    "06": "å±±å½¢", "07": "ç¦å³¶", "08": "èŒ¨åŸ", "09": "æ ƒæœ¨", "10": "ç¾¤é¦¬",
    "11": "åŸ¼ç‰", "12": "åƒè‘‰", "13": "æ±äº¬", "14": "ç¥å¥ˆå·", "15": "æ–°æ½Ÿ",
    "16": "å¯Œå±±", "17": "çŸ³å·", "18": "ç¦äº•", "19": "å±±æ¢¨", "20": "é•·é‡",
    "21": "å²é˜œ", "22": "é™å²¡", "23": "æ„›çŸ¥", "24": "ä¸‰é‡", "25": "æ»‹è³€",
    "26": "äº¬éƒ½", "27": "å¤§é˜ª", "28": "å…µåº«", "29": "å¥ˆè‰¯", "30": "å’Œæ­Œå±±",
    "31": "é³¥å–", "32": "å³¶æ ¹", "33": "å²¡å±±", "34": "åºƒå³¶", "35": "å±±å£",
    "36": "å¾³å³¶", "37": "é¦™å·", "38": "æ„›åª›", "39": "é«˜çŸ¥", "40": "ç¦å²¡",
    "41": "ä½è³€", "42": "é•·å´", "43": "ç†Šæœ¬", "44": "å¤§åˆ†", "45": "å®®å´",
    "46": "é¹¿å…å³¶", "47": "æ²–ç¸„", "48": "æ±äº¬", "49": "æ±äº¬", "50": "æ±äº¬",
    "51": "æ±äº¬", "52": "æ±äº¬", "53": "æ±äº¬", "54": "æ±äº¬", "55": "æ±äº¬",
    "56": "æ±äº¬", "57": "æ±äº¬", "58": "æ±äº¬", "59": "æ±äº¬", "60": "äº¬éƒ½",
    "61": "äº¬éƒ½", "62": "å¤§é˜ª", "63": "å¤§é˜ª", "64": "å¤§é˜ª", "65": "å…µåº«",
    "66": "å…µåº«", "67": "å…µåº«", "68": "å…µåº«", "69": "å¥ˆè‰¯", "70": "åºƒå³¶",
    "71": "åºƒå³¶", "72": "åºƒå³¶", "73": "åºƒå³¶", "74": "å±±å£", "75": "å±±å£",
    "76": "å¾³å³¶", "77": "é¦™å·", "78": "æ„›åª›", "79": "é«˜çŸ¥", "80": "ç¦å²¡",
    "81": "ç¦å²¡", "82": "ç¦å²¡", "83": "ç¦å²¡", "84": "ä½è³€", "85": "é•·å´",
    "86": "é•·å´", "87": "ç†Šæœ¬", "88": "å¤§åˆ†", "89": "å®®å´", "90": "æ²–ç¸„",
    "91": "æ²–ç¸„", "92": "æ²–ç¸„", "93": "æ±äº¬", "94": "æ±äº¬", "95": "æ±äº¬",
    "96": "æ±äº¬", "97": "æ±äº¬", "98": "æ²–ç¸„", "99": "æ²–ç¸„"
};
return mapping[code] || "æ±äº¬";
};

// æœˆé½¢ã‚’è¨ˆç®—ï¼ˆç°¡æ˜“ç‰ˆï¼‰
const getMoonPhase = (date) => {
const knownNewMoon = new Date(2025, 0, 29); // 2025å¹´1æœˆ29æ—¥ãŒæ–°æœˆ
const diffDays = Math.floor((date - knownNewMoon) / (1000 * 60 * 60 * 24));
const phase = ((diffDays % 29.53) + 29.53) % 29.53;

if (phase < 3.69) return { name: "æ–°æœˆ", emoji: "ğŸŒ‘", good: true };
if (phase < 7.38) return { name: "ä¸‰æ—¥æœˆ", emoji: "ğŸŒ’", good: false };
if (phase < 11.07) return { name: "ä¸Šå¼¦", emoji: "ğŸŒ“", good: false };
if (phase < 14.77) return { name: "æº€æœˆæ‰‹å‰", emoji: "ğŸŒ”", good: true };
if (phase < 18.46) return { name: "æº€æœˆ", emoji: "ğŸŒ•", good: true };
if (phase < 22.15) return { name: "æº€æœˆéã", emoji: "ğŸŒ–", good: true };
if (phase < 25.84) return { name: "ä¸‹å¼¦", emoji: "ğŸŒ—", good: false };
return { name: "æ–°æœˆæ‰‹å‰", emoji: "ğŸŒ˜", good: true };
};

// æœ€é©ãªç¨®ã¾ãæ—¥ã‚’è¨ˆç®—
const calculateOptimalSowingDates = (vegetable, climate, currentDate) => {
if (!climate) return null;
